/* PageLines Platform - 5.1.8
* Built: Thursday, November 16th, 2017, 18:16
* https://www.pagelines.com
* Copyright (c) 2017 PageLines; Licensed GPL-3.0 */
!function(a){a(document).ready(function(){"undefined"!=typeof window.PLWorkarea&&(config=[{name:"#wp-admin-bar-pl-ab-menu",position:"T",text:"<strong>Welcome to the Tour!</strong><br/>You can open/close the Builder by clicking this menu.",beforeSend:function(){},callback:function(){},showNext:!0,hideControls:!0},{name:".pl-workarea-sidebar",position:"R",text:"<strong>The Toolbar</strong><br/>This is the Platform 5 Builder, let's get started with it's basic editing buttons.",beforeSend:function(){},callback:function(){},showNext:!0},{name:".pl-workarea-sidebar",position:"R",text:"<strong>Section</strong><br/>Platform 5 has a bunch of sections you can add to your pages.",beforeSend:function(){a(".pl-workarea-sidebar").animate({scrollTop:a('[data-class="PL_Text_Section"]').position().top-200},"slow")},callback:function(){},showNext:!0},{name:'[data-class="PL_Text_Section"]',position:"R",text:"Lets add a Text section into the template area, click the Text Section button.",beforeSend:function(){},callback:function(){a('[data-class="PL_Text_Section"]').one("click",function(){setTimeout(function(){a(".pl-workarea-sidebar").scrollTop(0),a.plWizard.nextStep()},1e3)})}},{name:'[data-object="PL_Text_Section"]',position:"R",text:"Great! Now click on the section name to reveal tool options and click Edit.",beforeSend:function(){},callback:function(){a('[data-object="PL_Text_Section"]').delegate('[data-tool="options"]',"click",function(){a(this).data("clicked")||(a(this).data("clicked",!0),setTimeout(function(){a.plWizard.nextStep()},1e3))})}},{name:".richtext-frame",position:"R",text:"Now type some text into the box and watch it update in real-time on the page.<br />When your happy click on Background and Color",beforeSend:function(){},callback:function(){a(this).data("clicked")||(a(this).data("clicked",!0),a(".pl-workarea-sidebar").delegate(".panel-title.background","click",function(){a.plWizard.nextStep()}))}},{name:".panel-title.background",position:"R",text:"Thats great!",beforeSend:function(){},callback:function(){a(this).data("clicked")||a(this).data("clicked",!0)},showNext:!0},{name:"#wp-admin-bar-pl-ab-menu",position:"TR",text:"Lets head into the backend to look at the global options and the Extend System, click on Settings in this menu.",beforeSend:function(){"wp-admin-bar-pl-ab-settings";el=a('#wp-admin-bar-pl-ab-menu a[href$="settings"]'),link=a(el).attr("href"),a(el).attr("href",link+"&pltour=1")},callback:function(){a(this).data("clicked")||a(this).data("clicked",!0)}}]),"undefined"!=typeof window.PLAdmin&&(config=[{name:".pl-settings-nav",position:"T",text:"<strong>Welcome to the Tour!</strong><br/>These are the main Platform settings.",beforeSend:function(){},callback:function(){},showNext:!0,hideControls:!0},{name:'[href="#site_colors"]',position:"L",text:"<strong>Global Options</strong><br/>All these settings are global.",beforeSend:function(){},callback:function(){},showNext:!0,hideControls:!0},{name:"#toplevel_page_pl-platform-settings",position:"L",text:"Go ahead and click on extend.",beforeSend:function(){el=a('li.toplevel_page_pl-platform-settings a[href$="extend"]'),link=a(el).attr("href"),a(el).attr("href",link+"&pltour=3")},callback:function(){},showNext:!1,hideControls:!0},{name:".pl-store-title",position:"L",text:"The Extend page.",beforeSend:function(){},callback:function(){},showNext:!0,hideControls:!0}]),a.plWizard.init(config)}),a.plWizard={init:function(b){var c=this;c.step=0,c.config=b,console.log(getURLParameter("pltour")),0!=getURLParameter("pltour")&&(c.config=c.config.slice(getURLParameter("pltour")),console.log(c.config)),total_steps=c.config.length,c.showControls(),a("#activatetour").live("click",c.startTour),a("#canceltour").live("click",c.endTour),a("#endtour").live("click",c.endTour),a("#restarttour").live("click",c.restartTour),a(".nextstep").live("click",c.nextStep),a("#prevstep").live("click",c.prevStep),0!=getURLParameter("pltour")&&a("#activatetour").trigger("click")},nextStep:function(){var b=this;return a.plWizard.step>0?a("#prevstep").removeClass("disabled").show():a("#prevstep").addClass("disabled"),a.plWizard.step==b.total_steps-1?a("#nextstep").addClass("disabled"):a("#nextstep").removeClass("disabled").show(),a.plWizard.step>=b.total_steps?(a.plWizard.endTour(),!1):(++a.plWizard.step,void a.plWizard.showWiztip())},startTour:function(){a("#activatetour").parent().remove(),a("#endtour,#restarttour").show(),a(".tour-nav").show(),a.plWizard.nextStep()},prevStep:function(){return a.plWizard.step>2?a("#prevstep").removeClass("disabled").show():a("#prevstep").addClass("disabled"),a.plWizard.step==a.plWizard.total_steps&&a("#nextstep").removeClass("disabled").show(),a.plWizard.step<=1?!1:(--a.plWizard.step,void a.plWizard.showWiztip())},endTour:function(){step=0,autoplay&&clearTimeout(showtime),removeWiztip(),hideControls(),hideOverlay(),a(window).off("scroll.wizTipScroll")},restartTour:function(){step=0,autoplay&&clearTimeout(showtime),nextStep()},elementOrParentIsFixed:function(b){var c=a(b),d=c.add(c.parents()),e=!1;return d.each(function(){return"fixed"===a(this).css("position")?(e=!0,!1):void 0}),e},showWiztip:function(){var b=this,c=0,d=a.plWizard.config[a.plWizard.step-1],e=a.plWizard.config.length,f='<p><span class="pl-btn pl-btn-primary pl-btn-sm nextstep">Next</span></p>';a(".tourcontrol-title").html("Viewing "+a.plWizard.step+" of "+e),a.isFunction(d.beforeSend)&&d.beforeSend.call(this),d.hideControls&&a.plWizard.hideControls();var g=a(d.name),h=b.elementOrParentIsFixed(g)?!0:!1;setTimeout(function(){if(1==a.plWizard.step){a.plWizard.removeWiztip();var c=(d.bgcolor,d.color,a("<div>",{id:"tour_wiztip","class":"wiztip"}).css({display:"none"}));a("BODY").prepend(c)}else c=a(".wiztip");d.showNext?next=f:next="",c.html("<p>"+d.text+next+'</p><span class="wiztip_arrow"></span>'),b.setTheTipPosition(d,g,c),a(window).resize(function(){b.setTheTipPosition(d,g,c)}),h?(a(window).off("scroll.wizTipScroll"),a(window).on("scroll.wizTipScroll",function(){b.setTheTipPosition(d,g,c)})):a(window).off("scroll.wizTipScroll")},c),a.isFunction(d.callback)&&d.callback.call(this)},setTheTipPosition:function(b,c,d){var e=this,f={},g=b.position,h=c.outerWidth(),i=c.outerHeight(),j=c.offset().left,k=c.offset().top,l=e.elementOrParentIsFixed(c)?!0:!1;switch(g){case"TL":f={left:j,top:k+i+12+"px"},d.find("span.wiztip_arrow").removeClass().addClass("wiztip_arrow wiztip_arrow_TL");break;case"TR":f={left:j+h-d.width()+"px",top:k+i+12+"px"},d.find("span.wiztip_arrow").removeClass().addClass("wiztip_arrow wiztip_arrow_TR");break;case"BL":f={left:j+"px",top:k-d.height()-12+"px"},d.find("span.wiztip_arrow").removeClass().addClass("wiztip_arrow wiztip_arrow_BL");break;case"BR":f={left:j+h-d.width()+"px",top:k-d.height()-12+"px"},d.find("span.wiztip_arrow").removeClass().addClass("wiztip_arrow wiztip_arrow_BR");break;case"LT":f={left:j+h+"px",top:k+"px"},d.find("span.wiztip_arrow").removeClass().addClass("wiztip_arrow wiztip_arrow_LT");break;case"LB":f={left:j+h+"px",top:k+i-d.height()+"px"},d.find("span.wiztip_arrow").removeClass().addClass("wiztip_arrow wiztip_arrow_LB");break;case"RT":f={left:j-d.width()+"px",top:k+"px"},d.find("span.wiztip_arrow").removeClass().addClass("wiztip_arrow wiztip_arrow_RT");break;case"RB":f={left:j-d.width()+"px",top:k+i-d.height()+"px"},d.find("span.wiztip_arrow").removeClass().addClass("wiztip_arrow wiztip_arrow_RB");break;case"T":f={left:j+h/2-d.width()/2+"px",top:k+i+5+"px"},d.find("span.wiztip_arrow").removeClass().addClass("wiztip_arrow wiztip_arrow_T");break;case"R":f={left:j-d.width()-10+"px",top:k+i/2-d.height()/2+"px"},d.find("span.wiztip_arrow").removeClass().addClass("wiztip_arrow wiztip_arrow_R");break;case"B":f={left:j+h/2-d.width()/2+"px",top:k-d.height()-12+"px"},d.find("span.wiztip_arrow").removeClass().addClass("wiztip_arrow wiztip_arrow_B");break;case"L":f={left:j+h+5+"px",top:k+i/2-d.height()/2+"px"},d.find("span.wiztip_arrow").removeClass().addClass("wiztip_arrow wiztip_arrow_L")}var m=a(window).scrollTop(),n=a(window).scrollTop()+a(window).height(),o=parseFloat(f.top,10);o>k&&(o=k);var p=parseFloat(f.top,10)+d.height();k+i>p&&(p=k+i),!l&&(m>o||o>n||m>p||p>n)?a("html, body").stop().animate({scrollTop:o-100},500,"easeInOutExpo",function(){d.css(f).show()}):d.css(f).show()},removeWiztip:function(){a("#tour_wiztip").remove()},showControls:function(){var b='<div id="tourcontrols" class="tourcontrols">';b+='<p class="tourcontrol-title">Getting Started with Platform 5?</p>',b+='<p><span class="pl-btn pl-btn-primary pl-btn-large" id="activatetour"><i class="icon icon-magic"></i> Start the tour</span></p>',b+='<div class="tour-nav" style="display: none;"><span class="pl-btn pl-btn-primary disabled" id="prevstep"><i class="icon icon-caret-left"></i> Previous</span>',b+='&nbsp;&nbsp;<span class="pl-btn pl-btn-primary disabled" id="nextstep" >Next <i class="icon icon-caret-right"></i></span></div>',b+='<a id="restarttour" style="display:none;">Restart the tour</span>',b+='<a id="endtour" style="display:none;">End the tour</a>',b+='<span class="close-tour" id="canceltour"><i class="icon icon-remove"></i></span>',b+="</div>",a("BODY").prepend(b),a("#tourcontrols").animate({right:"30px"},500)},hideControls:function(){a("#tourcontrols").remove()},showOverlay:function(){var b='<div id="tour_overlay" class="overlay"></div>';a("BODY").prepend(b)},hideOverlay:function(){a("#tour_overlay").remove()}}}(window.jQuery);